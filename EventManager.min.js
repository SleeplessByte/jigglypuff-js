!function(){function e(){this._listeners={}}e.prototype={on:function(e,t){return(this._listeners[e]=this._listeners[e]||[]).push(t),this},off:function(e,t){if(1===arguments.length)this._listeners[e]=[];else if("function"==typeof t){var n=this._listeners[e];if(void 0!==n){for(var i=-1,r=0,s=n.length;s>r&&-1===i;r++)n[r]===t&&(i=r);i>=0&&n.splice(i,1)}}return this},trigger:function(t,n){var i=this._listeners[t];if(n=n||[],void 0!==i)for(var r,s={},o=0,h=i.length;h>o&&(r=new e.EventArg(t,s),i[o].apply(window,n.concat(r)),s=r.data,r.removed&&(i.splice(o,1),h=i.length,--o),!r.cancelled);o++);return this},hasListeners:function(e){return(void 0===this._listeners[e]?0:this._listeners[e].length)>0}},e.eventify=function(t,n){var i=e.eventify.methods;n=n||new e;for(var r=0,s=i.length;s>r;r++)(function(e){t[e]=function(){return n[e].apply(n,arguments)}})(i[r]);return n},e.eventify.methods=["on","off","trigger"],e.EventArg=function(e,t){this.name=e,this.data=t,this.cancelled=!1,this.removed=!1},e.EventArg.prototype={cancel:function(){this.cancelled=!0},remove:function(){this.removed=!0}},window.EventManager=e}();
